
<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>S4 Trainer</title>
<style>
body{font-family:sans-serif;background:#0f172a;color:#fff;padding:20px}
textarea{width:100%;min-height:70px;font-size:16px;margin-top:6px}
.line{margin-bottom:14px;padding:10px;background:#1e293b;border-radius:10px}
.count{font-size:12px;color:#94a3b8}
</style>
</head>
<body>

<h2>設問4 トレーニング</h2>
<select id="caseSelect"></select>
<div id="caseBox" style="margin:12px 0;padding:10px;background:#1e293b;border-radius:10px"></div>

<div id="inputs"></div>

<div style="margin-top:10px">合計文字数：<span id="total">0</span></div>

<script type="module">
import { S4_QUESTIONS } from './questions_s4.js';

const templates = [
"〇〇について受容的・共感的に受け止め信頼関係を維持する。",
"その上で〇〇を整理し自己理解を促す。",
"〇〇を確認し仕事理解を促す。",
"〇〇（自己理解）と、〇〇（仕事理解）を、照らし合わせて、〇〇が可能か具体的に比較検討を促す／照合する／すり合わせる／適合性を検討する",
"Ａ案と、Ｂ案を比較し、判断軸の明確化を促す。",
"最終的に相談者自身が納得できる目標を設定し主体的に取り組めるよう支援する。"
];

const titles = [
"① 受容",
"② 自己理解 ～ 自分を整理する",
"③ 仕事理解 ～ 仕事を整理する",
"④ 自分軸で仕事を評価 ～ 自分と仕事のマッチング検討",
"⑤ 比較検討 ～ 選択肢を具体的に比べる",
"⑥ 主体的意思決定 ～ 自分で決める"
];

const caseSelect = document.getElementById("caseSelect");
const caseBox = document.getElementById("caseBox");
const inputsDiv = document.getElementById("inputs");
const totalEl = document.getElementById("total");

S4_QUESTIONS.forEach((q,i)=>{
  const opt=document.createElement("option");
  opt.value=i;
  opt.textContent=q.id+"｜"+q.theme;
  caseSelect.appendChild(opt);
});

function charCount(str){return [...str].length}

function updateTotal(){
  let sum=0;
  document.querySelectorAll("textarea").forEach(t=>sum+=charCount(t.value));
  totalEl.textContent=sum;
}

function buildInputs(){
  inputsDiv.innerHTML="";
  for(let i=0;i<6;i++){
    const div=document.createElement("div");
    div.className="line";
    div.innerHTML=`
      <div><strong>${i+1}行目</strong>　${titles[i]}</div>
      <textarea>${templates[i]}</textarea>
      <div class="count">文字数：<span>0</span></div>
    `;
    const ta=div.querySelector("textarea");
    const count=div.querySelector("span");
    count.textContent=charCount(ta.value);
    ta.addEventListener("input",()=>{
      count.textContent=charCount(ta.value);
      updateTotal();
    });
    inputsDiv.appendChild(div);
  }
  updateTotal();
}

function loadCase(i){
  caseBox.textContent=S4_QUESTIONS[i].case;
  buildInputs();
}

caseSelect.addEventListener("change",e=>loadCase(e.target.value));

loadCase(0);

</script>

</body>
</html>
